(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(6),o=n.n(r),s=n(8),i=n(4),u=n(10),l=n.n(u),j=n(20),b=n(11),h=n.n(b);h.a.defaults.baseURL="https://pixabay.com/api/";var m={fetchImages:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.searchQuery,a=void 0===n?"":n,c=t.page,r=void 0===c?1:c,e.abrupt("return",h.a.get("?q=".concat(a,"&page=").concat(r,"&key=").concat("21833579-dbfb00598a636f5e3a6a2045e","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=n(1);function O(e){var t=e.onChangeQuery,n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(f.jsx)("header",{className:"Searchbar",children:Object(f.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),0!==r.length&&t(r)},children:[Object(f.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(f.jsx)("span",{className:"SearchForm-button-label",children:" Search "})}),Object(f.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value)}})]})})}var d=function(e){var t=e.url,n=e.onShowLargeImg;return Object(f.jsx)("li",{className:"ImageGalleryItem",children:Object(f.jsx)("img",{onClick:n,src:t,alt:"",className:"ImageGalleryItem-image"})})},g=function(e){var t=e.images,n=e.onShowLargeImg,a=function(e){n(e)};return Object(f.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.largeImageURL,n=e.webformatURL,c=e.id;return Object(f.jsx)(d,{url:n,onShowLargeImg:function(){return a(t)}},c)}))})};function p(e){var t=e.title,n=e.onButtonClick;return Object(a.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[]),Object(f.jsx)("div",{className:"ButtonPosition",children:Object(f.jsx)("button",{type:"button",className:"Button",onClick:n,children:t})})}var v=document.querySelector("#modal-root"),x=function(e){var t=e.children,n=e.onClose;Object(a.useEffect)((function(){var e=function(e){"Escape"===e.code&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]);return Object(r.createPortal)(Object(f.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&n()},children:Object(f.jsx)("div",{className:"Modal",children:t})}),v)},y=n(21),S=n.n(y);n(66);function w(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(1),o=Object(i.a)(r,2),u=o[0],l=o[1],j=Object(a.useState)([]),b=Object(i.a)(j,2),h=(b[0],b[1]),d=Object(a.useState)(""),v=Object(i.a)(d,2),y=v[0],w=v[1],k=Object(a.useState)(!1),I=Object(i.a)(k,2),N=I[0],C=I[1],L=Object(a.useState)(null),F=Object(i.a)(L,2),E=F[0],B=F[1],T=Object(a.useState)(""),Q=Object(i.a)(T,2),q=Q[0],G=Q[1],M=Object(a.useState)(!1),R=Object(i.a)(M,2),U=R[0],z=R[1];Object(a.useEffect)((function(){y&&J()}),[y]);var J=function(){var e={searchQuery:y,page:u};C(!0),m.fetchImages(e).then((function(e){c((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e))})),l((function(e){return e+1})),h(Object(s.a)(e)),0===e.length&&B("Nothing was find by your query. Try again.")})).catch((function(e){return B(e.message)})).finally((function(){return C(!1)}))},P=function(){z(!U)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O,{onChangeQuery:function(e){w(e),l(1),c([]),B(null)}}),E&&Object(f.jsxs)("p",{style:{color:"red",textAlign:"center",fontSize:"20px"},children:["This is error: ",E]}),Object(f.jsx)(g,{images:n,onShowLargeImg:function(e){G(e),P()}}),N&&Object(f.jsx)(S.a,{type:"Bars",color:"#00BFFF",height:80,width:80}),n.length>0&&!N&&Object(f.jsx)(p,{title:"Load More",onButtonClick:J}),U&&Object(f.jsx)(x,{onClose:P,children:Object(f.jsx)("img",{src:q,alt:""})})]})}o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.43960a7d.chunk.js.map